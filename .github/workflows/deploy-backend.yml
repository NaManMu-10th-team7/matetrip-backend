name: deploy-backend

on:
  push:
    branches: ["main"]      # develop에 푸시될 때 자동 배포
  workflow_dispatch:           # 필요하면 수동 실행도 가능

jobs:
  deploy:
    runs-on: self-hosted       # 지금 쓰고 있는 러너 그대로 사용
    concurrency:
      group: deploy-backend
      cancel-in-progress: true

    steps:
      - name: Deploy backend on EC2
        run: bash ~/app/matetrip-backend/deploy.sh
