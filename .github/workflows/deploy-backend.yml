name: deploy-backend

on:
  push:
    branches: ["main"]       # main 브랜치에 push(=merge)될 때마다 실행
  workflow_dispatch:         # 필요하면 수동 실행도 가능

jobs:
  deploy:
    runs-on: self-hosted     # 방금 설치한 EC2 러너
    concurrency:
      group: deploy-backend
      cancel-in-progress: true

    steps:
      - name: Deploy backend on EC2
        run: bash /home/ssm-user/app/matetrip-backend/deploy.sh
